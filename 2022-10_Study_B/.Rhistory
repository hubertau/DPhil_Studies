install.packages("bsts")
source("~/Drive/DPhil/DPhil_Studies/2022-10_Study_B/structural_time_series.R")
source("~/Drive/DPhil/DPhil_Studies/2022-10_Study_B/structural_time_series.R")
View(df)
library(dplyr)
install.packages('dplyr')
library(dplyr)
# Convert the 'date' column to a Date type
df$date <- as.Date(df$date)
View(df)
df <- read.csv("local_data/data_cleaned_bt_split_subs_full_aug_annotated_dm_vdem_complete.csv")
# Convert the 'date' column to a Date type
df$date <- as.Date(df$date)
# Convert the 'date' column to a Date type
df$date <- as.Date(df$publish_date)
# Extract the month from the 'date' column
df$month <- format(df$date, "%Y-%m")
# Group the dataframe by month and country, and calculate the count and sum
grouped <- df %>%
group_by(month, country) %>%
summarise(count = n(), sum_myth_count = sum(myth_count))
# View the resulting dataframe
print(grouped)
# View the resulting dataframe
print(grouped, n=100)
df$myth_count
library(ggplot2)
library(ggplot)
install.packages(ggplot2)
"ggplot2"
install.packages("ggplot2")
library(ggplot2)
ggplot(result, aes(x = month, y = count)) +
geom_bar(stat = "identity", fill = "blue", alpha = 0.7) +
labs(title = "Count of Values by Month and Country",
x = "Month",
y = "Count") +
theme_minimal()
ggplot(grouped, aes(x = month, y = count)) +
geom_bar(stat = "identity", fill = "blue", alpha = 0.7) +
labs(title = "Count of Values by Month and Country",
x = "Month",
y = "Count") +
theme_minimal()
ggplot(grouped, aes(x = month)) +
geom_line(aes(y = count, color = "Count"), size = 1.5) +
geom_line(aes(y = sum_myth_count, color = "Sum Myth Count"), size = 1.5) +
labs(title = "Count and Sum Myth Count by Month and Country",
x = "Month",
y = "Value") +
scale_color_manual(values = c("blue", "red")) +
theme_minimal()
grouped <- df %>%
group_by(month) %>%
summarise(count = n(), sum_myth_count = sum(myth_count))
ggplot(grouped, aes(x = month)) +
geom_line(aes(y = count, color = "Count"), size = 1.5) +
geom_line(aes(y = sum_myth_count, color = "Sum Myth Count"), size = 1.5) +
labs(title = "Count and Sum Myth Count by Month",
x = "Month",
y = "Value") +
scale_color_manual(values = c("blue", "red")) +
theme_minimal()
grouped
grouped
View(grouped)
grouped <- df %>%
group_by(month) %>%
summarise(count = n(), sum_myth_count = sum(myth_count, na.rm = TRUE))
# Group the dataframe by month and calculate the count and sum, handling NA values
grouped <- df %>%
group_by(month) %>%
summarise(count = n(), sum_myth_count = sum(myth_count, na.rm = TRUE))
library(tidyr)
library(dplyr)
install.packages('tidyr')
# Group the dataframe by month and calculate the count and sum, handling NA values
grouped <- df %>%
group_by(month) %>%
summarise(count = n(), sum_myth_count = sum(myth_count, na.rm = TRUE))
df <- df %>%
mutate(myth_count = replace_na(myth_count, 0))
library(dplyr)
library(tidyr)
mutate(myth_count = replace_na(myth_count, 0))
df <- df %>%
mutate(myth_count = replace_na(myth_count, 0))
# Group the dataframe by month and calculate the count and sum, handling NA values
grouped <- df %>%
group_by(month) %>%
summarise(count = n(), sum_myth_count = sum(myth_count, na.rm = TRUE))
grouped <- df %>%
group_by(month) %>%
summarise(count = n(), sum_myth_count = sum(myth_count))
# Group the dataframe by month and calculate the count and sum, handling NA values
grouped <- df %>%
group_by(month, country) %>%
summarise(count = n(), sum_myth_count = sum(myth_count, na.rm=TRUE))
y month and calculate the count and sum, handling NA values
grouped <- df %>%
group_by(month, country) %>%
summarise(count = n())
grouped <- df %>%
group_by(month, country)
df
library(dplyr)
library(tidyr)
library(ggplot2)
library(dplyr)
library(dplyr)
exit
.rs.restartR()
library(dplyr)
library(tidyr)
library(ggplot2)
df <- read.csv("local_data/data_cleaned_bt_split_subs_full_aug_annotated_dm_vdem_complete_notxt.csv")
# Check if the column has no null values
has_no_null <- !any(is.na(df$publish_date))
# Print the result
if (has_no_null) {
cat("The column has no null values.")
}
# Convert the 'date' column to a Date type
df$date <- as.Date(df$publish_date)
# Extract the month from the 'date' column
df$month <- format(df$date, "%Y-%m")
grouped <- df %>%
group_by(month) %>%
summarise(count = n(), sum_myth_count = sum(myth_count, na.rm = TRUE))
ggplot(grouped, aes(x = month)) +
geom_line(aes(y = count, color = "Count"), size = 1.5) +
geom_line(aes(y = sum_myth_count, color = "Sum Myth Count"), size = 1.5) +
labs(title = "Count and Sum Myth Count by Month",
x = "Month",
y = "Value") +
scale_color_manual(values = c("blue", "red")) +
theme_minimal()
View(grouped)
ggplot(grouped, aes(x = month, y = count, group = 1)) +
geom_line(aes(color = "Count"), size = 1.5) +
geom_line(aes(y = sum_myth_count, color = "Sum Myth Count"), size = 1.5) +
labs(title = "Count and Sum Myth Count by Month",
x = "Month",
y = "Value") +
scale_color_manual(values = c("blue", "red")) +
theme_minimal()
# Create a state specification
ss <- AddLocalLinearTrend(list(), grouped$count)
library(bsts)
# Create a state specification
ss <- AddLocalLinearTrend(list(), grouped$count)
# Add the regressor
ss <- AddRegressor(ss, grouped$sum_myth_count, standardize = TRUE)
